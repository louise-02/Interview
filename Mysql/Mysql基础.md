# 数据库三范式

1. **原子性**：

   列或者字段不能再分，要求属性具有原子性，不可再分解。

2. **唯一性**：

   对记录的惟一性约束，要求记录有惟一标识，即实体的惟一性。

3. **直接性**：

   数据不能存在传递关系，即每个属性都跟主键有直接关系，而不是间接关系。

例如：考虑一个订单表【Order】（OrderId，OrderDate，CustomerID，CustomerName，CustomerAddr，CustomerCity）主键是（OrderID）。 CustomerName，CustomerAddr，CustomerCity 直接依赖的是 CustomerID，而不是直接依赖于主键，它是通过传递才依赖于主键，所以不符合 3NF。

# SQL几种连接（待补充）

![image-20230705232613114](pictures/image-20230705232613114.png)

# SQL执行顺序

```
select [distinct] 字段1,字段2 | [聚合函数]
from 表1
[join 表2 on 连接条件]
[join 表3 on 连接条件]
where 查询条件
	[group by 分组字段 having[分组后条件筛选]]
	[order by 排序字段 排序方式]
	[limit m,n]
```

1. 先走from,确定从那些表中查询数据

2. join操作

3. 执行where筛选

4. group by 分组  ,分组函数就执行,聚合函数就执行了
5. having 筛选

6. select 决定要显示那些字段

7. distinct操作

8. order by 排序操作

9. limit 分页

# 事务特性ACID

- **原子性**（Atomicity）： 

  事务是最小单元,不可分隔.事务中的所有操作要么全部成功,要么全部失败。

- **一致性**（Consistency）：

   事务执行完毕之后,应该从一个一致性状态到另外一个一致性状态(比如一次转账中,从2000的总金额还是变成2000的总金额)。

- **隔离性**（Isolation）：

  在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务。

- **持久性**（Durability）：

  事务一旦提交，所做的操作终将要持久化到数据库中，即使在事务提交后有了其他故障， 事务的处理结果也会得到保存。

# 若不考虑隔离性会产生哪些读出来（待补充）

- **脏读**：

  一个事务读取到另外一个事务未提交的数据。

- **不可重复读**：

  在一个事务中,两次读取某些记录的结果不一致.是因为某些事务更新了这些数据导致的 。

- **幻读(虚读**)：

  在一个事务中,两次统计的结果不一致,是因为某些事务新增或者删除了这些数据导致的。

# 事务隔离级别（待补充）

![image-20230705234945928](pictures/image-20230705234945928.png)



# Mysql的存储引擎有哪些？

MyISAM、InnoDB、BDB(Berkeley DB)、MEMORY(Heap)、MERGE、EXAMPLE、NDB CIuster、 ARCHIVE、CSV、BLACKHOLE、FEDERATED。

InnoDB和BDB提供事务安全表，其他存储引擎都是非事务安全表。

# 常用的存储引擎介绍（待补充）

- **Myisam**

如果应用是以读写操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么可选用此种存储引擎。

每个Myisam在磁盘上存储成三个文件。文件名都和表名相同，扩展名分别为**.frm（存储表定义）**、**.MYD（MYData，存储数据）**、**.MYI（MYIndex，存储索引）**。

- **InnoDB**

用于事务处理应用程序，支持外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据一致性，数据操作除了插入和查询以外，还包括很多的更新删除操作，则InnoDB比较合适。InnoDB存储引擎除了能有效地降低由于删除和更新操作导致的锁定，还可以确保事务的完整提交和回滚。

表结构放在**frm文件**，数据和索引放在**IBD文件**。

- **Memory(Heap)**

MEMORY存储引擎将表中的数据存储到内存中，未查询和引用其他表数据提供快速访问。每一个表实际上和一个磁盘文件关联，文件是frm。

- **Merge**

用于将一系列等同的MyISAM表以逻辑方式组合在一起，并作为一个对象引用它们。Merge表的优点在于可以突破对单个MyISAM表大小的限制，并且将不同的表分布在多个磁盘上，可以有效地改善Merge表的访问效率。